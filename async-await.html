<!DOCTYPE html>
<html lang="en">
<head>
    <title>Document</title>
</head>
<body>
    <script>
         let stocks = {
        fruits: ['strawberry', 'grapes', 'banana','apple'],
        liquid: ['water', 'ice'],
        holder: ['cone','stick','cup'],
        toppings: ['chocolate', 'peanuts']};

        let is_shop_open = true;

        function time(ms) {
            return new Promise((resolve, reject) => {
                if(is_shop_open) {
                    setTimeout(resolve, ms);
                }
                else{
                    reject(console.log('shop is closed'));
                }
            });
        }
        async function kitchen () {
            try{
                await time(2000)
                console.log('order has been placed.')

                await time(2000)
                console.log(`${stocks.fruits[0]} has been selected.`)

                await time(1000)
                console.log('the fruit has been chopped.')

                await time(1000)
                console.log('machine has been started.')

                await time(2000)
                console.log(`${stocks.holder[0]} has been selected`)

                await time(3000)
                console.log(`${stocks.toppings[0]} has been selected as toppings.`)

                await time(2000)
                console.log('Ice cream has been served.')

            }
            catch (error){ console.log('customer left', error)}
            finally{console.log('day has ended, shop is closing.')}
        }
        kitchen();
    </script>
</body>
</html>